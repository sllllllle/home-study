<div class="main-wrapper">
  <div class="longBlock">
    <div class="userslist">
      <h2>サポーター一覧</h2>
      <ul>
        <% @supporters.each do |supporter| %>
          <li>
            <div class="userCard">
              <%= link_to supporter.user.name, user_path(supporter), class: "name" %>  
              <% if current_user.following?(supporter) %>
                <% if user.img.present? %>
                  <%= image_tag user.img.url, class: "profileImageSm" %>
                <% else %>
                  <%= image_tag "default_image.png", class: "profileImageSm" %>
                <% end %>
                <% if current_user.following?(supporter) %>
                  <%= form_with(model: current_user.relationships.find_by(follow_id: supporter.id), local: true, method: :delete) do |f| %>
                    <%= hidden_field_tag :follow_id, supporter.id %>
                    <%= f.submit "フォロー解除", class: 'btn btn-danger followBtn' %>
                  <% end %>
                <% else %>
                  <%= form_with(model: current_user.relationships.build, local: true) do |f| %>
                    <%= hidden_field_tag :follow_id, supporter.id %>
                    <%= f.submit "フォロー", class: 'btn btn-primary followBtn' %>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>